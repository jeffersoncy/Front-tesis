<!-- <app-breadcrumbs title="Formulario para prediccion"></app-breadcrumbs> -->

<div class="row" style="display: flex;justify-content: center;align-items: center;">

  <div class="col-lg-10">
    <div class="card">
        <div class="card-header">

        </div><!-- end card header -->
        <div class="card-body form-steps">
            <form class="row g-3 needs-validation" [formGroup]="gesPredictForm">
                <div class="text-center pt-3 pb-4 mb-1">
                    <h4>Formulario para predecir</h4>
                </div>
                <div id="custom-progress-bar" class="progress-nav">
                    <div class="progress" style="height: 1px;">
                        <div class="progress-bar" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                    <ng-stepper cdkStepper [linear]="true" class="cdksteppercontent nav nav-pills progress-bar-tab custom-nav" style="margin-right: 20px;">
                        <cdk-step [stepControl]="step1">
                            <ng-template cdkStepLabel class="wizard-nav mb-5">
                                <button class="nav-link rounded-pill active" data-progressbar="custom-progress-bar" id="pills-gen-info-tab" data-bs-toggle="pill" data-bs-target="#pills-gen-info" type="button" role="tab" aria-controls="pills-gen-info" aria-selected="true" disabled>1</button>
                            </ng-template>
                            <div formGroupName="step1">
                                <!-- <div> -->
                                <div class="mb-4">
                                    <div>
                                        <h5 class="mb-1">Contexto Personal</h5>
                                    </div>
                                </div>
                                <div class="row">
                                  <div class="col-lg-6">
                                    <div>
                                      <label for="departamento" class="form-label">¿En qué departamento vive actualmente?</label>
                                      <select class="form-select" id="departamento"
                                      [ngClass]="{ 'is-invalid' : validoFormulario && step1.get('departamento')?.errors }" formControlName="departamento">
                                        <option *ngFor="let depto of listaDepartamentos" [value]="depto.valor">{{ depto.label }}</option>
                                      </select>
                                      <small id="etiqquetaHelp" class="form-text text-muted">Seleccione el departamento en el que reside.</small>
                                      <div class="invalid-feedback" *ngIf="step1.get('departamento')?.errors">
                                        Debe seleccionar un departamento
                                      </div>
                                    </div>

                                    <div class="mt-3">
                                      <div>
                                        <label for="per_sexo_tipo" class="form-label">¿Con qué sexo se identifica?</label>
                                        <select class="form-select" id="per_sexo_tipo"
                                        [ngClass]="{ 'is-invalid' : validoFormulario && step1.get('per_sexo_tipo')?.errors }" formControlName="per_sexo_tipo">
                                          <option value="Hombre">Hombre</option>
                                          <option value="Mujer">Mujer</option>
                                        </select>
                                        <small id="etiqquetaHelp" class="form-text text-muted">Indique si se identifica como Hombre o Mujer.</small>
                                        <div class="invalid-feedback" *ngIf="step1.get('per_sexo_tipo')?.errors">
                                          Debe seleccionar una opción
                                        </div>
                                      </div>
                                    </div>

                                    <div class="mt-3">
                                      <div>
                                        <label for="d2_03_estado_civil_tipo" class="form-label">¿Cuál es su estado civil?</label>
                                        <select class="form-select" id="d2_03_estado_civil_tipo"
                                        [ngClass]="{ 'is-invalid' : validoFormulario && step1.get('d2_03_estado_civil_tipo')?.errors }" formControlName="d2_03_estado_civil_tipo">
                                          <option value="d2_03_Soltero">Soltero</option>
                                          <option value="d2_03_Union_libre">Union libre</option>
                                          <option value="d2_03_Casado">Casado</option>
                                          <option value="d2_03_Separado_Divorciado">Separado - Divorciado</option>
                                          <option value="d2_03_Viudo">Viudo</option>
                                        </select>
                                        <small id="etiqquetaHelp" class="form-text text-muted">Indique su estado civil actual.</small>
                                        <div class="invalid-feedback" *ngIf="step1.get('d2_03_estado_civil_tipo')?.errors">
                                          Debe seleccionar un tipo de estado civil
                                        </div>
                                      </div>
                                    </div>

                                    <div class="mt-3">
                                      <div>
                                        <label for="per_edad_tipo" class="form-label">¿En qué edad o etapa de desarrollo se encuentra?</label>
                                        <select class="form-select" id="per_edad_tipo"
                                        [ngClass]="{ 'is-invalid' : validoFormulario && step1.get('per_edad_tipo')?.errors }" formControlName="per_edad_tipo">
                                          <option value="Adolescente">Adolecente(Edad menor o igual a 18 años)</option>
                                          <option value="Joven">Joven(Edad mayor o igual a 19 años y menor o igual a 27 años )</option>
                                          <option value="Adulto">Adulto(Edad mayor o igual a 28 años y menor o igual a 59 años )</option>
                                          <option value="Persona mayor">Persona mayor(Edad mayor o igual a 60 años)</option>
                                        </select>
                                        <small id="etiqquetaHelp" class="form-text text-muted">Indique su edad o etapa de desarrollo actual.</small>
                                        <div class="invalid-feedback" *ngIf="step1.get('per_edad_tipo')?.errors">
                                          Debe seleccionar una opción
                                        </div>
                                      </div>
                                    </div>

                                    <div class="mt-3">
                                      <div>
                                          <div class="mb-3">
                                              <label for="d2_04_num_hijos" class="form-label">¿Cuántos hijos vivos tiene usted?</label>
                                              <input type="number" class="form-control" placeholder="Ingrese el número de hijos" id="d2_04_num_hijos"
                                                  [ngClass]="{ 'is-invalid' : validoFormulario && step1.get('d2_04_num_hijos')?.errors }" formControlName="d2_04_num_hijos" [attr.min]="0">
                                              <small id="etiqquetaHelp" class="form-text text-muted">Ingrese el número de hijos vivos que tiene.</small>

                                              <div class="invalid-feedback" *ngIf="step1.get('d2_04_num_hijos')?.errors">
                                                <span *ngIf="step1.get('d2_04_num_hijos')?.errors!['required']">Debe ingresar un número.</span>
                                                <span *ngIf="step1.get('d2_04_num_hijos')?.errors!['min']">El número no puede ser negativo.</span>
                                            </div>
                                          </div>
                                      </div>
                                    </div>

                                    <div class="mt-3">
                                      <div>
                                        <label for="estrato_tipo" class="form-label">¿En qué estrato social se encuentra actualmente?</label>
                                        <select class="form-select" id="estrato_tipo"
                                        [ngClass]="{ 'is-invalid' : validoFormulario && step1.get('estrato_tipo')?.errors }" formControlName="estrato_tipo">
                                          <option value="Estrato bajo">Estrato bajo(Estrato 1 y 2)</option>
                                          <option value="Estrato medio">Estrato medio(Estrato 3 y 4)</option>
                                          <option value="Estrato alto">Estrato alto(Estrato 5, 6 o mayor a 6)</option>
                                        </select>
                                        <small id="etiqquetaHelp" class="form-text text-muted">Seleccione el estrato social al que pertenece.</small>
                                        <div class="invalid-feedback" *ngIf="step1.get('estrato_tipo')?.errors">
                                          Debe seleccionar un tipo de estrato
                                        </div>
                                      </div>
                                    </div>

                                  </div>

                                  <div class="col-lg-6">

                                    <div class="mb-3">
                                      <div>
                                        <label for="d2_05_nivel_educativo_tipo" class="form-label">¿Cuál es su nivel educativo más alto alcanzado?</label>
                                        <select class="form-select" id="d2_05_nivel_educativo_tipo"
                                        [ngClass]="{ 'is-invalid' : validoFormulario && step1.get('d2_05_nivel_educativo_tipo')?.errors }" formControlName="d2_05_nivel_educativo_tipo">
                                          <option value="d2_05_Ninguno">Ninguno</option>
                                          <option value="d2_05_Preescolar">Preescolar</option>
                                          <option value="d2_05_Basica_primaria">Basica primaria</option>
                                          <option value="d2_05_Basica_secundaria">Basica secundaria</option>
                                          <option value="d2_05_Media">Media</option>
                                          <option value="d2_05_Tecnico/Tecnologo">Tecnico/Tecnologo</option>
                                          <option value="d2_05_Universitario">Universitario</option>
                                          <option value="d2_05_Postgrado">Postgrado</option>
                                        </select>
                                        <small id="etiqquetaHelp" class="form-text text-muted">Indique el mayor nivel educativo que ha completado.</small>
                                        <div class="invalid-feedback" *ngIf="step1.get('d2_05_nivel_educativo_tipo')?.errors">
                                          Debe seleccionar un tipo nivel educativo
                                        </div>
                                      </div>
                                    </div>

                                    <div class="mt-3">
                                      <div>
                                        <label for="d2_01_etnia_tipo" class="form-label">¿A qué etnia pertenece?</label>
                                        <select class="form-select" id="d2_01_etnia_tipo"
                                        [ngClass]="{ 'is-invalid' : validoFormulario && step1.get('d2_01_etnia_tipo')?.errors }" formControlName="d2_01_etnia_tipo">
                                          <option value="d2_01_Ninguno">Ninguno</option>
                                          <option value="d2_01_Indigena">Indigena</option>
                                          <option value="d2_01_Negro_Mulato_Afrodescendinte_Afrocolombiano">Negro - Mulato - Afrodescendiente - Afrocolombiano</option>
                                          <option value="d2_01_Razial_archipielago_San_Andres_Providencia">Razial - Archipielago San Andres Providencia</option>
                                          <option value="d2_01_Palanquero_San_Basilio">Palenquero - San Basilio</option>
                                          <option value="d2_01_Gitano/ROM">Gitano/ROM</option>
                                        </select>
                                        <small id="etiqquetaHelp" class="form-text text-muted">Seleccione la etnia con la que se identifica.</small>
                                        <div class="invalid-feedback" *ngIf="step1.get('d2_01_etnia_tipo')?.errors">
                                          Debe seleccionar un tipo de etnia
                                        </div>
                                      </div>
                                    </div>

                                    <div class="mt-3">
                                      <label for="d_08_estado_salud_tipo" class="form-label">¿Cuál es su estado de salud actual?</label>
                                      <select class="form-select" id="d_08_estado_salud_tipo"
                                        [ngClass]="{ 'is-invalid' : validoFormulario && step1.get('d_08_estado_salud_tipo')?.errors }" formControlName="d_08_estado_salud_tipo">
                                        <option value="d_08_Muy_bueno">Muy bueno</option>
                                        <option value="d_08_Bueno">Bueno</option>
                                        <option value="d_08_Regular">Regular</option>
                                        <option value="d_08_Malo">Malo</option>
                                        <option value="d_08_Muy_malo">Muy malo</option>
                                      </select>
                                      <small id="etiqquetaHelp" class="form-text text-muted">Seleccione el estado de salud con el que cuenta actualmente.</small>
                                      <div class="invalid-feedback" *ngIf="step1.get('d_08_estado_salud_tipo')?.errors">
                                        Debe seleccionar una opción
                                      </div>
                                    </div>

                                    <div class="mt-3">
                                      <div>
                                        <label for="d_09_deprimido_tipo" class="form-label">¿Ha estado deprimido?</label>
                                        <select class="form-select" id="d_09_deprimido_tipo"
                                        [ngClass]="{ 'is-invalid' : validoFormulario && step1.get('d_09_deprimido_tipo')?.errors }" formControlName="d_09_deprimido_tipo">
                                          <option value="d_09_Si">Si</option>
                                          <option value="d_09_No">No</option>
                                        </select>
                                        <small id="etiqquetaHelp" class="form-text text-muted">Indique si ha sentido depresión recientemente.</small>
                                        <div class="invalid-feedback" *ngIf="step1.get('d_09_deprimido_tipo')?.errors">
                                          Debe seleccionar una opción
                                        </div>
                                      </div>
                                    </div>

                                    <div class="mt-3">
                                      <div>
                                        <label for="d_10_poco_interes_tipo" class="form-label">¿Ha sentido poco interés en las actividades que le gusta realizar?</label>
                                        <select class="form-select" id="d_10_poco_interes_tipo"
                                        [ngClass]="{ 'is-invalid' : validoFormulario && step1.get('d_10_poco_interes_tipo')?.errors }" formControlName="d_10_poco_interes_tipo">
                                          <option value="d_10_Si">Si</option>
                                          <option value="d_10_No">No</option>
                                        </select>
                                        <small id="etiqquetaHelp" class="form-text text-muted">Indique si ha sentido desinterés en sus actividades favoritas.</small>
                                        <div class="invalid-feedback" *ngIf="step1.get('d_10_poco_interes_tipo')?.errors">
                                          Debe seleccionar una opción
                                        </div>
                                      </div>
                                    </div>

                                  </div>
                                </div>
                                <!-- </div> -->
                                <!-- wizard-tab -->
                                <!-- <div class="d-flex align-items-start gap-3 mt-4">
                                    <button type="button" class="btn btn-success btn-label right ms-auto nexttab nexttab" data-nexttab="pills-info-desc-tab" cdkStepperNext><i class="ri-arrow-right-line label-icon align-middle fs-16 ms-2"></i>Continuar</button>
                                </div> -->
                                <div class="d-flex align-items-start gap-3 mt-4">
                                  <!-- <button type="button" class="btn btn-link text-decoration-none btn-label previestab" data-previous="pills-gen-info-tab" cdkStepperPrevious><i class="ri-arrow-left-line label-icon align-middle fs-16 me-2"></i> Regresar</button> -->
                                  <button type="button" class="btn btn-success btn-label right ms-auto nexttab nexttab" data-nexttab="pills-success-tab" (click)="avanzarPer(step1)"><i class="ri-arrow-right-line label-icon align-middle fs-16 ms-2"></i>Continuar</button>
                                </div>
                            </div>
                        </cdk-step>

                        <cdk-step [stepControl]="step2" [optional]="false">
                          <ng-template cdkStepLabel>
                              <button class="nav-link rounded-pill" data-progressbar="custom-progress-bar" id="pills-info-desc-tab" data-bs-toggle="pill" data-bs-target="#pills-info-desc" type="button" role="tab" aria-controls="pills-info-desc" aria-selected="false" disabled>2</button>
                          </ng-template>
                          <div formGroupName="step2">
                            <div class="mb-4">
                              <div>
                                  <h5 class="mb-1">Contexto Social y Familiar</h5>
                              </div>
                            </div>
                            <div class="row">
                              <div class="col-lg-6 mt-3">

                                <div class="mb-3">
                                  <label for="residentes_hogar" class="form-label">¿Con cuántas personas vive usted?</label>
                                  <input type="number" class="form-control" placeholder="Ingrese el número de residentes" id="residentes_hogar"
                                      [ngClass]="{ 'is-invalid' : validoFormularioP1 && step2.get('residentes_hogar')?.errors }" formControlName="residentes_hogar"
                                      [attr.min]="0">
                                  <small id="etiquetaHelp" class="form-text text-muted">Ingrese el número de personas que residen en su hogar.</small>
                                  <div class="invalid-feedback" *ngIf="step2.get('residentes_hogar')?.errors">
                                    <span *ngIf="step2.get('residentes_hogar')?.errors!['required']">Debe ingresar un número.</span>
                                    <span *ngIf="step2.get('residentes_hogar')?.errors!['min']">El número no puede ser negativo.</span>
                                </div>
                              </div>

                              <div class="mt-3">
                                <div>
                                  <label for="vive_padre_hogar_tipo" class="form-label">¿Su padre vive en su hogar?</label>
                                  <select class="form-select" id="vive_padre_hogar_tipo"
                                  [ngClass]="{ 'is-invalid' : validoFormularioP1 && step2.get('vive_padre_hogar_tipo')?.errors }" formControlName="vive_padre_hogar_tipo">
                                    <option value="vive_padre_hogar_Si">Si</option>
                                    <option value="vive_padre_hogar_No">No</option>
                                    <option value="vive_padre_hogar_Fallecido">Fallecido</option>
                                  </select>
                                  <small id="etiqquetaHelp" class="form-text text-muted">Indique si su padre reside en su hogar o fallecio.</small>
                                  <div class="invalid-feedback" *ngIf="step2.get('vive_padre_hogar_tipo')?.errors">
                                    Debe seleccionar una opción
                                  </div>
                                </div>
                              </div>

                              <div class="mt-3">
                                <div>
                                  <label for="vive_madre_hogar_tipo" class="form-label">¿Su madre vive en su hogar?</label>
                                  <select class="form-select" id="vive_madre_hogar_tipo"
                                  [ngClass]="{ 'is-invalid' : validoFormularioP1 && step2.get('vive_madre_hogar_tipo')?.errors }" formControlName="vive_madre_hogar_tipo">
                                    <option value="vive_madre_hogar_Si">Si</option>
                                    <option value="vive_madre_hogar_No">No</option>
                                    <option value="vive_madre_hogar_Fallecida">Fallecida</option>
                                  </select>
                                  <small id="etiqquetaHelp" class="form-text text-muted">Indique si su madre reside en su hogaro fallecio.</small>
                                  <div class="invalid-feedback" *ngIf="step2.get('vive_madre_hogar_tipo')?.errors">
                                    Debe seleccionar una opción
                                  </div>
                                </div>
                              </div>

                              <div class="mt-3">
                                <div>
                                  <label for="d_01_aporta_dinero_hogar_tipo" class="form-label">¿Aporta económicamente a su hogar?</label>
                                  <select class="form-select" id="d_01_aporta_dinero_hogar_tipo"
                                  [ngClass]="{ 'is-invalid' : validoFormularioP1 && step2.get('d_01_aporta_dinero_hogar_tipo')?.errors }" formControlName="d_01_aporta_dinero_hogar_tipo">
                                    <option value="d_01_Si">Si</option>
                                    <option value="d_01_No">No</option>
                                  </select>
                                  <small id="etiqquetaHelp" class="form-text text-muted">Indique si contribuye económicamente en su hogar.</small>
                                  <div class="invalid-feedback" *ngIf="step2.get('d_01_aporta_dinero_hogar_tipo')?.errors">
                                    Debe seleccionar una opción
                                  </div>
                                </div>
                              </div>

                              <div class="mt-3">
                                <div>
                                  <label for="d_12_b_presenta_problema_consumo_sp_barrio_tipo" class="form-label">¿En su barrio se presenta el consumo de sustancias psicoactivas?</label>
                                  <select class="form-select" id="d_12_b_presenta_problema_consumo_sp_barrio_tipo"
                                  [ngClass]="{ 'is-invalid' : validoFormularioP1 && step2.get('d_12_b_presenta_problema_consumo_sp_barrio_tipo')?.errors }" formControlName="d_12_b_presenta_problema_consumo_sp_barrio_tipo">
                                    <option value="d_12_b_Si">Si</option>
                                    <option value="d_12_b_No">No</option>
                                  </select>
                                  <small id="etiqquetaHelp" class="form-text text-muted">Indique si en su barrio se consume sustancias psicoactivas.</small>
                                  <div class="invalid-feedback" *ngIf="step2.get('d_12_b_presenta_problema_consumo_sp_barrio_tipo')?.errors">
                                    Debe seleccionar una opción
                                  </div>
                                </div>
                              </div>

                              <div class="mt-3">
                                <div>
                                  <label for="d_12_c_presenta_problema_expendio_sp_barrio_tipo" class="form-label">¿En su barrio se presenta el expendido de sustancias psicoactivas?</label>
                                  <select class="form-select" id="d_12_c_presenta_problema_expendio_sp_barrio_tipo"
                                  [ngClass]="{ 'is-invalid' : validoFormularioP1 && step2.get('d_12_c_presenta_problema_expendio_sp_barrio_tipo')?.errors }" formControlName="d_12_c_presenta_problema_expendio_sp_barrio_tipo">
                                    <option value="d_12_c_Si">Si</option>
                                    <option value="d_12_c_No">No</option>
                                  </select>
                                  <small id="etiqquetaHelp" class="form-text text-muted">Indique si en su barrio se venden sustancias psicoactivas.</small>
                                  <div class="invalid-feedback" *ngIf="step2.get('d_12_c_presenta_problema_expendio_sp_barrio_tipo')?.errors">
                                    Debe seleccionar una opción
                                  </div>
                                </div>
                              </div>

                            </div>

                            <div class="col-lg-6 mt-3">

                              <div>
                                <div>
                                  <label for="vivienda_tipo" class="form-label">¿Con qué tipo de vivienda cuenta?</label>
                                  <select class="form-select" id="vivienda_tipo"
                                  [ngClass]="{ 'is-invalid' : validoFormularioP1 && step2.get('vivienda_tipo')?.errors }" formControlName="vivienda_tipo">
                                    <option value="Apartamento">Apartamento</option>
                                    <option value="Casa">Casa</option>
                                    <option value="Cuarto">Cuarto</option>
                                    <option value="Vivienda_indigena">Vivienda indigena</option>
                                  </select>
                                  <small id="etiqquetaHelp" class="form-text text-muted">Seleccione el tipo de vivienda en la que vive actualmente.</small>
                                  <div class="invalid-feedback" *ngIf="step2.get('vivienda_tipo')?.errors">
                                    Debe seleccionar un tipo de vivienda
                                  </div>
                                </div>
                              </div>

                              <div class="mt-3">
                                <div>
                                  <label for="situacion_tipo" class="form-label">¿En que situación se encuentra actualmente?</label>
                                  <select class="form-select" id="situacion_tipo"
                                  [ngClass]="{ 'is-invalid' : validoFormularioP1 && step2.get('situacion_tipo')?.errors }" formControlName="situacion_tipo">
                                    <option value="Estudiando">Estudiando</option>
                                    <option value="Buscando trabajo">Buscando trabajo</option>
                                    <option value="Trabajando">Trabajando</option>
                                    <option value="Otros">Otros</option>
                                  </select>
                                  <small id="etiqquetaHelp" class="form-text text-muted">Indique la actividad con la que ocupa mayormente su tiempo.</small>
                                  <div class="invalid-feedback" *ngIf="step2.get('situacion_tipo')?.errors">
                                    Debe seleccionar una opción
                                  </div>
                                </div>
                              </div>

                                <div class="mt-3">
                                  <div>
                                    <label for="g_01_familiares_consumen_sp_tipo" class="form-label">¿Tiene familiares que consuman sustancias psicoactivas?</label>
                                    <select class="form-select" id="g_01_familiares_consumen_sp_tipo"
                                    [ngClass]="{ 'is-invalid' : validoFormularioP1 && step2.get('g_01_familiares_consumen_sp_tipo')?.errors }" formControlName="g_01_familiares_consumen_sp_tipo" (change)="familiaConsumeChanege()">
                                      <option value="g_01_Si">Si</option>
                                      <option value="g_01_No">No</option>
                                    </select>
                                    <small id="etiqquetaHelp" class="form-text text-muted">Indique si tiene familiares que consumen sustancias psicoactivas.</small>
                                    <div class="invalid-feedback" *ngIf="step2.get('g_01_familiares_consumen_sp_tipo')?.errors">
                                      Debe seleccionar una opción
                                    </div>
                                  </div>
                                </div>

                                <div class="mt-3">
                                  <div>
                                    <label for="g_01_a_num_familiares_consumen_sp_imp_tipo" class="form-label">¿Cuantos familiares consumen sustancias psicoactivas?</label>
                                    <select class="form-select" id="g_01_a_num_familiares_consumen_sp_imp_tipo"
                                    [ngClass]="{ 'is-invalid' : validoFormularioP1 && step2.get('g_01_a_num_familiares_consumen_sp_imp_tipo')?.errors }" formControlName="g_01_a_num_familiares_consumen_sp_imp_tipo">
                                      <option value="g_01_a_No_aplica" [attr.disabled]="isNoAplicaDisabledFam ? true : null">No aplica</option>
                                      <option value="g_01_a_Uno">Uno</option>
                                      <option value="g_01_a_Dos_o_mas">Dos o mas</option>
                                    </select>
                                    <small id="etiqquetaHelp" class="form-text text-muted">Indique el número de familiares que consumen sustancias psicoactivas.</small>
                                    <div class="invalid-feedback" *ngIf="step2.get('g_01_a_num_familiares_consumen_sp_imp_tipo')?.errors">
                                      Debe seleccionar una opción
                                    </div>
                                  </div>
                                </div>

                                <div class="mt-3">
                                  <div>
                                    <label for="g_02_amigos_consumen_sp_tipo" class="form-label">¿Tiene amigos que consuman sustancias psicoactivas?</label>
                                    <select class="form-select" id="g_02_amigos_consumen_sp_tipo"
                                    [ngClass]="{ 'is-invalid' : validoFormularioP1 && step2.get('g_02_amigos_consumen_sp_tipo')?.errors }" formControlName="g_02_amigos_consumen_sp_tipo" (change)="amigosConsumeChanege()">
                                      <option value="g_02_Si">Si</option>
                                      <option value="g_02_No">No</option>
                                    </select>
                                    <small id="etiqquetaHelp" class="form-text text-muted">Indique si tiene amigos que consumen sustancias psicoactivas.</small>
                                    <div class="invalid-feedback" *ngIf="step2.get('g_02_amigos_consumen_sp_tipo')?.errors">
                                      Debe seleccionar una opción
                                    </div>
                                  </div>
                                </div>

                                <div class="mt-3">
                                  <div>
                                    <label for="g_02_a_num_amigos_consumen_sp_imp_tipo" class="form-label">¿Cuantos amigos consumen sustancias psicoactivas?</label>
                                    <select class="form-select" id="g_02_a_num_amigos_consumen_sp_imp_tipo"
                                    [ngClass]="{ 'is-invalid' : validoFormularioP1 && step2.get('g_02_a_num_amigos_consumen_sp_imp_tipo')?.errors }" formControlName="g_02_a_num_amigos_consumen_sp_imp_tipo">
                                      <option value="g_02_a_No_aplica" [attr.disabled]="isNoAplicaDisabledAmi ? true : null">No aplica</option>
                                      <option value="g_02_a_Uno">Uno</option>
                                      <option value="g_02_a_Dos_o_mas">Dos o mas</option>
                                    </select>
                                    <small id="etiqquetaHelp" class="form-text text-muted"> Indique el número de amigos que consumen sustancias psicoactivas.</small>
                                    <div class="invalid-feedback" *ngIf="step2.get('g_02_a_num_amigos_consumen_sp_imp_tipo')?.errors">
                                      Debe seleccionar una opción
                                    </div>
                                  </div>
                                </div>



                              </div>
                              <!-- <div class="col-12">
                                <button class="btn btn-primary" type="button" (click)="predecir()">Predecir</button>
                              </div> -->
                            </div>

                            <div class="d-flex align-items-start gap-3 mt-4">
                              <button type="button" class="btn btn-link text-decoration-none btn-label previestab" data-previous="pills-gen-info-tab" cdkStepperPrevious><i class="ri-arrow-left-line label-icon align-middle fs-16 me-2"></i> Regresar</button>
                              <button type="button" class="btn btn-success btn-label right ms-auto nexttab nexttab" data-nexttab="pills-success-tab" (click)="avanzarConP1(step2)"><i class="ri-arrow-right-line label-icon align-middle fs-16 ms-2"></i>Continuar</button>
                            </div>
                          </div>
                        </cdk-step>

                        <cdk-step [stepControl]="step3" [optional]="false">
                          <ng-template cdkStepLabel>
                              <button class="nav-link rounded-pill" data-progressbar="custom-progress-bar" id="pills-info-desc-tab" data-bs-toggle="pill" data-bs-target="#pills-info-desc" type="button" role="tab" aria-controls="pills-info-desc" aria-selected="false" disabled>3</button>
                          </ng-template>
                          <div formGroupName="step3">
                            <div class="mb-4">
                              <div>
                                  <h5 class="mb-1">Consumo y Conocimiento sobre Sustancias Psicoactivas Ilicitas</h5>
                              </div>
                            </div>
                            <div class="row">
                              <div class="col-lg-6 mt-3">

                                <div>
                                  <div>
                                    <label for="bandera_frecuencia_consumo" class="form-label">¿Ha consumido algún tipo de sustancia psicoactiva?</label>
                                    <select class="form-select" id="bandera_frecuencia_consumo"
                                    [ngClass]="{ 'is-invalid' : validoFormularioP2 && step3.get('bandera_frecuencia_consumo')?.errors }" formControlName="bandera_frecuencia_consumo" (change)="banderaFrecuenciaChanege()">
                                      <option value="bandera_frecuencia_consumo_Si">Si</option>
                                      <option value="bandera_frecuencia_consumo_No">No</option>
                                    </select>
                                    <small id="etiqquetaHelp" class="form-text text-muted">Indique si consumio o ha consumido marihuana, cocaina o basuco</small>
                                    <div class="invalid-feedback" *ngIf="step3.get('bandera_frecuencia_consumo')?.errors">
                                      Debe seleccionar una opción
                                    </div>
                                  </div>
                                </div>

                                <div class="mt-3">
                                    <label for="frecuencia_consumo_marihuana_tipo" class="form-label">¿Con qué frecuencia consumió o ha consumido marihuana?</label>
                                    <select class="form-select" id="frecuencia_consumo_marihuana_tipo"
                                    [ngClass]="{ 'is-invalid' : validoFormularioP2 && step3.get('frecuencia_consumo_marihuana_tipo')?.errors }" formControlName="frecuencia_consumo_marihuana_tipo">
                                      <option value="Nunca">Nunca</option>
                                      <option value="Alguna vez en su vida">Alguna vez en su vida</option>
                                      <option value="Una vez en el año">Una vez en el año</option>
                                      <option value="Algunas veces durante los últimos 12 meses">Algunas veces durante los últimos 12 meses</option>
                                      <option value="Algunas veces mensualmente">Algunas veces mensualmente</option>
                                      <option value="Algunas veces semanalmente">Algunas veces semanalmente</option>
                                      <option value="Diariamente">Diariamente</option>
                                    </select>
                                    <small id="etiqquetaHelp" class="form-text text-muted">Indique la frecuencia con la que consume marihuana</small>
                                    <div class="invalid-feedback" *ngIf="step3.get('frecuencia_consumo_marihuana_tipo')?.errors">
                                      Debe seleccionar una opción
                                    </div>
                                </div>

                                <div class="mt-3">
                                  <div>
                                    <label for="frecuencia_consumo_cocaina_tipo" class="form-label">¿Con que regularidad consumio o ha consumido cocaína?</label>
                                    <select class="form-select" id="frecuencia_consumo_cocaina_tipo"
                                    [ngClass]="{ 'is-invalid' : validoFormularioP2 && step3.get('frecuencia_consumo_cocaina_tipo')?.errors }" formControlName="frecuencia_consumo_cocaina_tipo">
                                      <option value="Nunca">Nunca</option>
                                      <option value="Alguna vez en su vida">Alguna vez en su vida</option>
                                      <option value="Una vez en el año">Una vez en el año</option>
                                      <option value="Algunas veces durante los últimos 12 meses">Algunas veces durante los últimos 12 meses</option>
                                      <option value="Algunas veces mensualmente">Algunas veces mensualmente</option>
                                      <option value="Algunas veces semanalmente">Algunas veces semanalmente</option>
                                      <option value="Diariamente">Diariamente</option>
                                    </select>
                                    <small id="etiqquetaHelp" class="form-text text-muted">Indique la frecuencia con la que consume cocaína</small>
                                    <div class="invalid-feedback" *ngIf="step3.get('frecuencia_consumo_cocaina_tipo')?.errors">
                                      Debe seleccionar una opción
                                    </div>
                                  </div>
                                </div>

                                <div class="mt-3">
                                  <div>
                                    <label for="frecuencia_consumo_basuco_tipo" class="form-label">¿Qué tan a menudo llego a consumir basuco?</label>
                                    <select class="form-select" id="frecuencia_consumo_basuco_tipo"
                                    [ngClass]="{ 'is-invalid' : validoFormularioP2 && step3.get('frecuencia_consumo_basuco_tipo')?.errors }" formControlName="frecuencia_consumo_basuco_tipo">
                                      <option value="Nunca">Nunca</option>
                                      <option value="Alguna vez en su vida">Alguna vez en su vida</option>
                                      <option value="Una vez en el año">Una vez en el año</option>
                                      <option value="Algunas veces durante los últimos 12 meses">Algunas veces durante los últimos 12 meses</option>
                                      <option value="Algunas veces mensualmente">Algunas veces mensualmente</option>
                                      <option value="Algunas veces semanalmente">Algunas veces semanalmente</option>
                                      <option value="Diariamente">Diariamente</option>
                                    </select>
                                    <small id="etiqquetaHelp" class="form-text text-muted">Indique la frecuencia con la que consume basuco.</small>
                                    <div class="invalid-feedback" *ngIf="step3.get('frecuencia_consumo_basuco_tipo')?.errors">
                                      Debe seleccionar una opción
                                    </div>
                                  </div>
                                </div>

                                <div class="mt-3">
                                  <div>
                                    <label for="d_11_h_conocimiento_riesgo_fumar_marihuana_frecuentemente_tipo" class="form-label">¿Conoce el riesgo que corre una persona al consumir marihuana frecuentemente?</label>
                                    <select class="form-select" id="d_11_h_conocimiento_riesgo_fumar_marihuana_frecuentemente_tipo"
                                    [ngClass]="{ 'is-invalid' : validoFormularioP2 && step3.get('d_11_h_conocimiento_riesgo_fumar_marihuana_frecuentemente_tipo')?.errors }" formControlName="d_11_h_conocimiento_riesgo_fumar_marihuana_frecuentemente_tipo">
                                      <option value="d_11_h_Gran_riesgo">Riesgo alto</option>
                                      <option value="d_11_h_Riesgo_moderado">Riesgo moderado</option>
                                      <option value="d_11_h_Riesgo_leve">Riesgo leve</option>
                                      <option value="d_11_h_Ningun_riesgo">Ningun riesgo</option>
                                      <option value="d_11_h_No_conoce_riesgo">No conoce el riesgo</option>
                                    </select>
                                    <small id="etiqquetaHelp" class="form-text text-muted">Indique si está consciente de los riesgos de consumir marihuana de forma frecuente.</small>
                                    <div class="invalid-feedback" *ngIf="step3.get('d_11_h_conocimiento_riesgo_fumar_marihuana_frecuentemente_tipo')?.errors">
                                      Debe seleccionar una opción
                                    </div>
                                  </div>
                                </div>

                                <div class="mt-3">
                                  <div>
                                    <label for="d_11_k_conocimiento_riesgo_cocaina_frecuentemente_tipo" class="form-label">¿Conoce el riesgo que corre una persona al consumir cocaína frecuentemente?</label>
                                    <select class="form-select" id="d_11_k_conocimiento_riesgo_cocaina_frecuentemente_tipo"
                                    [ngClass]="{ 'is-invalid' : validoFormularioP2 && step3.get('d_11_k_conocimiento_riesgo_cocaina_frecuentemente_tipo')?.errors }" formControlName="d_11_k_conocimiento_riesgo_cocaina_frecuentemente_tipo">
                                      <option value="d_11_k_Gran_riesgo">Riesgo alto</option>
                                      <option value="d_11_k_Riesgo_moderado">Riesgo moderado</option>
                                      <option value="d_11_k_Riesgo_leve">Riesgo leve</option>
                                      <option value="d_11_k_Ningun_riesgo">Ningun riesgo</option>
                                      <option value="d_11_k_No_conoce_riesgo">No conoce el riesgo</option>
                                    </select>
                                    <small id="etiqquetaHelp" class="form-text text-muted">Indique si está consciente de los riesgos de consumir cocaína de forma frecuente.</small>
                                    <div class="invalid-feedback" *ngIf="step3.get('d_11_k_conocimiento_riesgo_cocaina_frecuentemente_tipo')?.errors">
                                      Debe seleccionar una opción
                                    </div>
                                  </div>
                                </div>

                                <div class="mt-3">
                                  <div>
                                    <label for="d_11_n_conocimiento_riesgo_fumar_basuco_frecuentemente_tipo" class="form-label">¿Conoce el riesgo que corre una persona al consumir basuco frecuentemente?</label>
                                    <select class="form-select" id="d_11_n_conocimiento_riesgo_fumar_basuco_frecuentemente_tipo"
                                    [ngClass]="{ 'is-invalid' : validoFormularioP2 && step3.get('d_11_n_conocimiento_riesgo_fumar_basuco_frecuentemente_tipo')?.errors }" formControlName="d_11_n_conocimiento_riesgo_fumar_basuco_frecuentemente_tipo">
                                      <option value="d_11_n_Gran_riesgo">Riesgo alto</option>
                                      <option value="d_11_n_Riesgo_moderado">Riesgo moderado</option>
                                      <option value="d_11_n_Riesgo_leve">Riesgo leve</option>
                                      <option value="d_11_n_Ningun_riesgo">Ningun riesgo</option>
                                      <option value="d_11_n_No_conoce_riesgo">No conoce el riesgo</option>
                                    </select>
                                    <small id="etiqquetaHelp" class="form-text text-muted">Indique si está consciente de los riesgos de consumir basuco de forma frecuente.</small>
                                    <div class="invalid-feedback" *ngIf="step3.get('d_11_n_conocimiento_riesgo_fumar_basuco_frecuentemente_tipo')?.errors">
                                      Debe seleccionar una opción
                                    </div>
                                  </div>
                                </div>

                                <div class="mt-3">
                                  <div>
                                    <label for="g_03_curiosidad_probar_sp_tipo" class="form-label">¿Ha sentido curiosidad por probar sustancias psicoactivas?</label>
                                    <select class="form-select" id="g_03_curiosidad_probar_sp_tipo"
                                    [ngClass]="{ 'is-invalid' : validoFormularioP2 && step3.get('g_03_curiosidad_probar_sp_tipo')?.errors }" formControlName="g_03_curiosidad_probar_sp_tipo">
                                      <option value="g_03_Si">Si</option>
                                      <option value="g_03_No">No</option>
                                    </select>
                                    <small id="etiqquetaHelp" class="form-text text-muted">Indique si ha tenido curiosidad por probar sustancias psicoactivas.</small>
                                    <div class="invalid-feedback" *ngIf="step3.get('g_03_curiosidad_probar_sp_tipo')?.errors">
                                      Debe seleccionar una opción
                                    </div>
                                  </div>
                                </div>

                                <div class="mt-3">
                                  <div>
                                    <label for="g_04_probaria_sp_tipo" class="form-label">¿Probaria sustancias psicoactivas?</label>
                                    <select class="form-select" id="g_04_probaria_sp_tipo"
                                    [ngClass]="{ 'is-invalid' : validoFormularioP2 && step3.get('g_04_probaria_sp_tipo')?.errors }" formControlName="g_04_probaria_sp_tipo">
                                      <option value="g_04_Si">Si</option>
                                      <option value="g_04_No">No</option>
                                    </select>
                                    <small id="etiqquetaHelp" class="form-text text-muted">Indique si estaría dispuesto a probar sustancias psicoactivas.</small>
                                    <div class="invalid-feedback" *ngIf="step3.get('g_04_probaria_sp_tipo')?.errors">
                                      Debe seleccionar una opción
                                    </div>
                                  </div>
                                </div>

                              </div>

                              <div class="col-lg-6 mt-3">

                                <div>
                                  <div>
                                    <label for="g_05_posibilidad_probar_sp_tipo" class="form-label">¿Ha tenido la posibilidad de probar sustancias psicoactivas?</label>
                                    <select class="form-select" id="g_05_posibilidad_probar_sp_tipo"
                                    [ngClass]="{ 'is-invalid' : validoFormularioP2 && step3.get('g_05_posibilidad_probar_sp_tipo')?.errors }" formControlName="g_05_posibilidad_probar_sp_tipo">
                                      <option value="g_05_Si">Si</option>
                                      <option value="g_05_No">No</option>
                                    </select>
                                    <small id="etiqquetaHelp" class="form-text text-muted">Indique si ha tenido la oportunidad de probar sustancias psicoactivas.</small>
                                    <div class="invalid-feedback" *ngIf="step3.get('g_05_posibilidad_probar_sp_tipo')?.errors">
                                      Debe seleccionar una opción
                                    </div>
                                  </div>
                                </div>

                                <div class="mt-3">
                                  <div>
                                    <label for="g_06_a_posibilidad_conseguir_marihuana_tipo" class="form-label">¿Qué tan fácil le sería conseguir marihuana?</label>
                                    <select class="form-select" id="g_06_a_posibilidad_conseguir_marihuana_tipo"
                                    [ngClass]="{ 'is-invalid' : validoFormularioP2 && step3.get('g_06_a_posibilidad_conseguir_marihuana_tipo')?.errors }" formControlName="g_06_a_posibilidad_conseguir_marihuana_tipo">
                                      <option value="g_06_a_No_podria_conseguir">No podria conseguir</option>
                                      <option value="g_06_a_No_conoce_facilidad_dificultad">No conoce la facilidad</option>
                                      <option value="g_06_a_Seria_facil">Seria facil conseguir</option>
                                      <option value="g_06_a_Seria_dificil">Seria dificil conseguir</option>
                                    </select>
                                    <small id="etiqquetaHelp" class="form-text text-muted">Indique la facilidad con la que podría obtener marihuana.</small>
                                    <div class="invalid-feedback" *ngIf="step3.get('g_06_a_posibilidad_conseguir_marihuana_tipo')?.errors">
                                      Debe seleccionar una opción
                                    </div>
                                  </div>
                                </div>

                                <div class="mt-3">
                                  <div>
                                    <label for="g_06_b_posibilidad_conseguir_cocaina_tipo" class="form-label">¿Con que facilidad podría conseguir cocaína?</label>
                                    <select class="form-select" id="g_06_b_posibilidad_conseguir_cocaina_tipo"
                                    [ngClass]="{ 'is-invalid' : validoFormularioP2 && step3.get('g_06_b_posibilidad_conseguir_cocaina_tipo')?.errors }" formControlName="g_06_b_posibilidad_conseguir_cocaina_tipo">
                                      <option value="g_06_b_No_podria_conseguir">No podria conseguir</option>
                                      <option value="g_06_b_No_conoce_facilidad_dificultad">No conoce la facilidad</option>
                                      <option value="g_06_b_Seria_facil">Seria facil conseguir</option>
                                      <option value="g_06_b_Seria_dificil">Seria dificil conseguir</option>
                                    </select>
                                    <small id="etiqquetaHelp" class="form-text text-muted">Indique la facilidad con la que podría obtener cocaína.</small>
                                    <div class="invalid-feedback" *ngIf="step3.get('g_06_b_posibilidad_conseguir_cocaina_tipo')?.errors">
                                      Debe seleccionar una opción
                                    </div>
                                  </div>
                                </div>

                                <div class="mt-3">
                                  <div>
                                    <label for="g_06_c_posibilidad_conseguir_basuco_tipo" class="form-label">¿Con que grado de facilidad podría conseguir basuco?</label>
                                    <select class="form-select" id="g_06_c_posibilidad_conseguir_basuco_tipo"
                                    [ngClass]="{ 'is-invalid' : validoFormularioP2 && step3.get('g_06_c_posibilidad_conseguir_basuco_tipo')?.errors }" formControlName="g_06_c_posibilidad_conseguir_basuco_tipo">
                                      <option value="g_06_c_No_podria_conseguir">No podria conseguir</option>
                                      <option value="g_06_c_No_conoce_facilidad_dificultad">No conoce la facilidad</option>
                                      <option value="g_06_c_Seria_facil">Seria facil conseguir</option>
                                      <option value="g_06_c_Seria_dificil">Seria dificil conseguir</option>
                                    </select>
                                    <small id="etiqquetaHelp" class="form-text text-muted">Indique la facilidad con la que podría obtener basuco.</small>
                                    <div class="invalid-feedback" *ngIf="step3.get('g_06_c_posibilidad_conseguir_basuco_tipo')?.errors">
                                      Debe seleccionar una opción
                                    </div>
                                  </div>
                                </div>

                                <div class="mt-3">
                                  <div>
                                    <label for="g_07_alguien_ofrecio_comprar_probar_sp_tipo" class="form-label">¿Alguien le ha ofrecido comprar o probar sustancias psicoactivas?</label>
                                    <select class="form-select" id="g_07_alguien_ofrecio_comprar_probar_sp_tipo"
                                    [ngClass]="{ 'is-invalid' : validoFormularioP2 && step3.get('g_07_alguien_ofrecio_comprar_probar_sp_tipo')?.errors }" formControlName="g_07_alguien_ofrecio_comprar_probar_sp_tipo" (change)="ofertSpiChanege()">
                                      <option value="g_07_Si">Si</option>
                                      <option value="g_07_No">No</option>
                                    </select>
                                    <small id="etiqquetaHelp" class="form-text text-muted">Indique si alguien le ha ofrecido comprar o probar sustancias psicoactivas.</small>
                                    <div class="invalid-feedback" *ngIf="step3.get('g_07_alguien_ofrecio_comprar_probar_sp_tipo')?.errors">
                                      Debe seleccionar una opción
                                    </div>
                                  </div>
                                </div>

                                <div class="mt-3">
                                  <div>
                                    <label for="g_08_a_ofrecieron_marihuana_imp_tipo" class="form-label">¿Hace cuánto tiempo le ofrecieron marihuana?</label>
                                    <select class="form-select" id="g_08_a_ofrecieron_marihuana_imp_tipo"
                                    [ngClass]="{ 'is-invalid' : validoFormularioP2 && step3.get('g_08_a_ofrecieron_marihuana_imp_tipo')?.errors }" formControlName="g_08_a_ofrecieron_marihuana_imp_tipo">
                                      <option value="g_08_a_No_aplica" [attr.disabled]="isNoAplicaOfer ? true : null">No aplica</option>
                                      <option value="g_08_a_Nunca_me_han_ofrecido">Nunca me han ofrecido</option>
                                      <option value="g_08_a_Mas_12_meses">Mas de 12 meses</option>
                                      <option value="g_08_a_Mas_30_dias_Menos_12_meses">Mas de 30 dias y menos de 12 meses</option>
                                      <option value="g_08_a_Ultimos_30_dias">Ultimos 30 dias</option>
                                    </select>
                                    <small id="etiqquetaHelp" class="form-text text-muted">Indique cuándo fue la última vez que le ofrecieron marihuana.</small>
                                    <div class="invalid-feedback" *ngIf="step3.get('g_08_a_ofrecieron_marihuana_imp_tipo')?.errors">
                                      Debe seleccionar una opción
                                    </div>
                                  </div>
                                </div>

                                <div class="mt-3">
                                  <div>
                                    <label for="g_08_b_ofrecieron_cocaina_imp_tipo" class="form-label">¿Hace cuánto tiempo le ofrecieron cocaína?</label>
                                    <select class="form-select" id="g_08_b_ofrecieron_cocaina_imp_tipo"
                                    [ngClass]="{ 'is-invalid' : validoFormularioP2 && step3.get('g_08_b_ofrecieron_cocaina_imp_tipo')?.errors }" formControlName="g_08_b_ofrecieron_cocaina_imp_tipo">
                                      <option value="g_08_b_No_aplica" [attr.disabled]="isNoAplicaOfer ? true : null">No aplica</option>
                                      <option value="g_08_b_Nunca_me_han_ofrecido">Nunca me han ofrecido</option>
                                      <option value="g_08_b_Mas_12_meses">Mas de 12 meses</option>
                                      <option value="g_08_b_Mas_30_dias_Menos_12_meses">Mas de 30 dias y menos de 12 meses</option>
                                      <option value="g_08_b_Ultimos_30_dias">Ultimos 30 dias</option>
                                    </select>
                                    <small id="etiqquetaHelp" class="form-text text-muted">Indique cuándo fue la última vez que le ofrecieron cocaína.</small>
                                    <div class="invalid-feedback" *ngIf="step3.get('g_08_b_ofrecieron_cocaina_imp_tipo')?.errors">
                                      Debe seleccionar una opción
                                    </div>
                                  </div>
                                </div>

                                <div class="mt-3">
                                  <div>
                                    <label for="g_08_c_ofrecieron_basuco_imp_tipo" class="form-label">¿Hace cuánto tiempo le ofrecieron basuco?</label>
                                    <select class="form-select" id="g_08_c_ofrecieron_basuco_imp_tipo"
                                    [ngClass]="{ 'is-invalid' : validoFormularioP2 && step3.get('g_08_c_ofrecieron_basuco_imp_tipo')?.errors }" formControlName="g_08_c_ofrecieron_basuco_imp_tipo">
                                      <option value="g_08_c_No_aplica" [attr.disabled]="isNoAplicaOfer ? true : null">No aplica</option>
                                      <option value="g_08_c_Nunca_me_han_ofrecido">Nunca me han ofrecido</option>
                                      <option value="g_08_c_Mas_12_meses">Mas de 12 meses</option>
                                      <option value="g_08_c_Mas_30_dias_Menos_12_meses">Mas de 30 dias y menos de 12 meses</option>
                                      <option value="g_08_c_Ultimos_30_dias">Ultimos 30 dias</option>
                                    </select>
                                    <small id="etiqquetaHelp" class="form-text text-muted">Indique cuándo fue la última vez que le ofrecieron basuco.</small>
                                    <div class="invalid-feedback" *ngIf="step3.get('g_08_c_ofrecieron_basuco_imp_tipo')?.errors">
                                      Debe seleccionar una opción
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <!-- <div class="col-12">
                                <button class="btn btn-primary" type="button" (click)="predecir()">Predecir</button>
                              </div> -->
                            </div>

                            <div class="d-flex align-items-start gap-3 mt-4">
                              <button type="button" class="btn btn-link text-decoration-none btn-label previestab" data-previous="pills-gen-info-tab" cdkStepperPrevious><i class="ri-arrow-left-line label-icon align-middle fs-16 me-2"></i> Regresar</button>
                              <button type="button" class="btn btn-success btn-label right ms-auto nexttab nexttab" data-nexttab="pills-success-tab" (click)="newPredict(step3)"><i class="ri-arrow-right-line label-icon align-middle fs-16 ms-2"></i>Predecir</button>
                            </div>
                          </div>
                        </cdk-step>

                        <cdk-step [optional]="false">
                            <ng-template cdkStepLabel>
                                <button class="nav-link rounded-pill" data-progressbar="custom-progress-bar" id="pills-success-tab" data-bs-toggle="pill" data-bs-target="#pills-success" type="button" role="tab" aria-controls="pills-success" aria-selected="false" disabled>4</button>
                            </ng-template>
                            <div>
                                <div class="text-center">
                                    <div class="mb-4">
                                        <lord-icon src="https://cdn.lordicon.com/lupuorrc.json" trigger="loop" colors="primary:#0ab39c,secondary:#405189" style="width:120px;height:120px"></lord-icon>
                                    </div>
                                    <div *ngIf="prediccion == 'Riesgo alto' || prediccion == 'Riesgo muy alto'">
                                      <img src="../../../../assets/images/tesis/riesgo_m_a.png" style="width:200px;height:200px">
                                    </div>
                                    <div *ngIf="prediccion == 'Riesgo medio'">
                                      <img src="../../../../assets/images/tesis/riesgo_m.png" style="width:200px;height:200px">
                                    </div>
                                    <div *ngIf="prediccion == 'Riesgo bajo' || prediccion == 'Riesgo muy bajo'">
                                      <img src="../../../../assets/images/tesis/riesgo_m_b.png" style="width:200px;height:200px">
                                    </div>
                                    <br/>
                                    <h1>{{ prediccion }}</h1>
                                    <br/>
                                    <p class="text-muted">{{ sig_prediccion }}</p>
                                </div>
                            </div>
                        </cdk-step>
                    </ng-stepper>
                </div>
            </form>
        </div>
        <!-- end card body -->
    </div>
    <!-- end card -->
</div>

</div>

<div *ngIf="loading">
  <ngx-spinner bdColor = "rgba(0, 0, 0, 0.8)" size = "large" color = "white" type = "square-jelly-box" [fullScreen] = "true"><p style="color: white" > Prediciendo... </p></ngx-spinner>
</div>

<div *ngIf="mostrarCaracteristicas" style="display: flex;justify-content: center;align-items: center;">
  <div class="col-xxl-10">
    <div class="card">
        <div class="card-body">
          <div class="row justify-content-center">
            <div class="col-md-10 text-center">
              <h4 class="mb-3">Factores influyentes en la prediccion</h4>
              <p class="text-muted">Este apartado hace referencia a las caracteristicas que tuvieron mayor influencia en la prediccion previamente expuesta, cabe destacar que estas caracteriticas van acorde a la respuesta dada por el usuario y son dadas por el modelo como las mas influyentes.</p>
              <apx-chart [series]="distributedColumnChart.series" [chart]="distributedColumnChart.chart"
                         [dataLabels]="distributedColumnChart.dataLabels" [plotOptions]="distributedColumnChart.plotOptions"
                         [yaxis]="distributedColumnChart.yaxis" [xaxis]="distributedColumnChart.xaxis"
                         [legend]="distributedColumnChart.legend" [colors]="distributedColumnChart.colors"
                         [grid]="distributedColumnChart.grid" dir="ltr"></apx-chart>
            </div>
          </div>
            <!--end row-->
            <div class="row">
              <div class="col-md-12">
                <div class="container">
                  <div class="tabs d-flex flex-column justify-content-center">
                    <div *ngFor="let caracteristica of caracteristicas; let i = index"
                         [class.active]="tabActiva === i"
                         (click)="seleccionarTab(i)">
                      {{ caracteristica.clave }}
                    </div>
                  </div>

                  <div class="contenido">
                    <div>
                      <apx-chart [series]="strokedCircleChart.series" [chart]="strokedCircleChart.chart"
                      [plotOptions]="strokedCircleChart.plotOptions" [labels]="strokedCircleChart.labels"
                      [fill]="strokedCircleChart.fill" [stroke]="strokedCircleChart.stroke" [colors]="strokedCircleChart.colors" dir="ltr"></apx-chart>
                    </div>
                    <div *ngIf="tabActiva != -1">
                        <p class="mb-0">{{ caracteristicas[tabActiva].significado }}</p>
                        <p class="mb-0">Su respuesta: {{ caracteristicas[tabActiva].respuesta }}</p>
                    </div>
                  </div>
                </div>
              </div><br><br><br><br>
              <!-- <div class="col-md-12" class="d-flex align-items-start gap-3 mt-4"> -->
                <div class="col-md-12" style="display: flex;justify-content: center;align-items: center;">
                  <button type="button" class="btn btn-success mt-3" (click)="reiniciarForm()">Volver a predecir</button>
                </div>
            </div>
        </div><!-- end card-body -->
    </div><!-- end card -->
  </div>
</div>
